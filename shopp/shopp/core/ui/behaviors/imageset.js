/*
 * imageset.js - Image settings UI behaviors
 * Copyright ?? 2011 by Ingenesis Limited. All rights reserved.
 * Licensed under the GPLv3 {@see license.txt}
 */
jQuery(document).ready(function(c){c.template("editor",c("#editor"));var a=false,b=c("#image-setting-table");c("#images a.edit, a.add-new").click(function(j){j.preventDefault();var k=c(this),p=k.parents("tr").hide(),f=p.size()>0?p.attr("id").substr(14):false,i=images[f]?images[f]:{name:""},l=c.tmpl("editor",i),h=b.find("tr.empty"),g=l.find("select.fit-menu").val(i.fit),o=l.find("select.quality-menu").val(i.quality),n=function(){c(this).val(asPercent(c(this).val()))},d=l.find(".percentage").each(n).change(n),m=l.find("a.cancel");k.cancel=function(q){if(q){q.preventDefault()}a=false;if(h.size()==1){h.show()}l.remove();p.fadeIn("fast")};m.click(k.cancel);if(a){a.cancel(false)}if(p.size()>0){l.insertAfter(p)}else{if(h.size()>0){h.hide()}b.prepend(l)}a=k});c("#images a.delete").click(function(){if(confirm($is.confirm)){return true}else{return false}})});